# ============================================================================
# Chainy - æ¥µè‡´çœéŒ¢é…ç½®æ¨¡æ¿ï¼ˆå€‹äººå°ˆæ¡ˆï¼‰
# ============================================================================
# 
# ä½¿ç”¨æ­¤é…ç½®ï¼š
# 1. è¤‡è£½æ­¤æ–‡ä»¶ç‚º terraform.tfvars
#    cp terraform.tfvars.cost-optimized terraform.tfvars
#
# 2. æ›¿æ›éƒµç®±åœ°å€å’Œå€‹äººè³‡è¨Š
#
# 3. (å¯é¸) é…ç½®åŸŸå
#
# 4. éƒ¨ç½²
#    terraform init
#    terraform apply
#
# æœˆè²»ç”¨é ä¼°ï¼š< $1
# ä¿è­·ç´šåˆ¥ï¼šä¸­ç­‰ï¼ˆå€‹äººå°ˆæ¡ˆå¤ ç”¨ï¼‰
# ============================================================================

environment = "prod"
region      = "ap-northeast-1"

# ============================================================================
# å®‰å…¨é…ç½® - æ¥µè‡´çœéŒ¢æ–¹æ¡ˆ
# ============================================================================

# JWT èªè­‰ï¼šå•Ÿç”¨ï¼ˆå…è²»ï¼Œåªå¢åŠ å°‘é‡ Lambda åŸ·è¡Œæ™‚é–“ï¼‰
enable_authentication = true

# WAFï¼šä¸å•Ÿç”¨ï¼Œæ”¹ç”¨ CloudFlare å…è²»æ–¹æ¡ˆ
# CloudFlare æä¾›ï¼šDDoS é˜²è­· + åŸºæœ¬ WAF + é€Ÿç‡é™åˆ¶ï¼ˆå®Œå…¨å…è²»ï¼‰
enable_waf = false

# ============================================================================
# é ç®—æ§åˆ¶ï¼ˆå‰ 2 å€‹é ç®—å…è²»ï¼ï¼‰
# ============================================================================

# å•Ÿç”¨é ç®—ç›£æ§
enable_budget_monitoring = true

# æœˆåº¦é ç®—ï¼š$10ï¼ˆä¿å®ˆä¼°è¨ˆï¼‰
monthly_budget_limit = 10

# æ¯æ—¥æˆæœ¬è­¦å‘Šï¼š$1
daily_cost_threshold = 1

# âš ï¸ é‡è¦ï¼šæ›¿æ›ç‚ºæ‚¨çš„éƒµç®±
budget_alert_emails = ["liyu.chu.work@gmail.com"]

# ============================================================================
# CloudWatch æ—¥èªŒå„ªåŒ–ï¼ˆæœ€å°æˆæœ¬ï¼‰
# ============================================================================

# æ—¥èªŒä¿ç•™ï¼šåªä¿ç•™ 1 å¤©ï¼ˆå¤§å¹…é™ä½æˆæœ¬ï¼‰
log_retention_in_days = 1

# äº‹ä»¶ä¿ç•™ï¼š7 å¤©
click_events_retention_days = 7

# ============================================================================
# Lambda ç’°å¢ƒè®Šæ•¸
# ============================================================================

lambda_additional_environment = {
  # ç”Ÿç”¢ç’°å¢ƒåªè¨˜éŒ„éŒ¯èª¤ï¼ˆæ¸›å°‘æ—¥èªŒé‡ï¼‰
  LOG_LEVEL = "ERROR"
}

# ============================================================================
# å¯é¸ï¼šè‡ªè¨‚åŸŸåé…ç½®
# ============================================================================
# å¦‚æœæ‚¨æœ‰åŸŸåä¸¦æƒ³ä½¿ç”¨ CloudFlareï¼Œè«‹å–æ¶ˆè¨»é‡‹ï¼š
# 
# web_domain         = "yourdomain.com"
# web_subdomain      = "chainy"
# web_hosted_zone_id = "YOUR_ROUTE53_ZONE_ID"

# ============================================================================
# æ¨™ç±¤
# ============================================================================

extra_tags = {
  Project      = "chainy"
  Environment  = "prod"
  CostProfile  = "optimized"
  ManagedBy    = "terraform"
  Owner        = "your-name"  # âš ï¸ æ›¿æ›ç‚ºæ‚¨çš„åå­—
}

# ============================================================================
# ğŸ’° æˆæœ¬ä¼°ç®—
# ============================================================================
#
# Lambda:         < $0.50  (å…è²»é¡åº¦å…§)
# DynamoDB:       < $0.20  (å…è²»é¡åº¦å…§)
# CloudWatch:     < $0.30  (1å¤©ä¿ç•™)
# S3:             < $0.10  (7å¤©ä¿ç•™)
# API Gateway:    < $0.20  (ä½æµé‡)
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ç¸½è¨ˆ:           < $1.30/æœˆ
#
# + CloudFlare å…è²»æ–¹æ¡ˆï¼ˆ$0ï¼‰
#
# å°æ¯”å®Œæ•´æ–¹æ¡ˆï¼ˆ$10-15/æœˆï¼‰
# ç¯€çœï¼š> 90%
# ============================================================================

