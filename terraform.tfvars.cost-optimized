# ============================================================================
# Chainy - 極致省錢配置模板（個人專案）
# ============================================================================
# 
# 使用此配置：
# 1. 複製此文件為 terraform.tfvars
#    cp terraform.tfvars.cost-optimized terraform.tfvars
#
# 2. 替換郵箱地址和個人資訊
#
# 3. (可選) 配置域名
#
# 4. 部署
#    terraform init
#    terraform apply
#
# 月費用預估：< $1
# 保護級別：中等（個人專案夠用）
# ============================================================================

environment = "prod"
region      = "ap-northeast-1"

# ============================================================================
# 安全配置 - 極致省錢方案
# ============================================================================

# JWT 認證：啟用（免費，只增加少量 Lambda 執行時間）
enable_authentication = true

# WAF：不啟用，改用 CloudFlare 免費方案
# CloudFlare 提供：DDoS 防護 + 基本 WAF + 速率限制（完全免費）
enable_waf = false

# ============================================================================
# 預算控制（前 2 個預算免費！）
# ============================================================================

# 啟用預算監控
enable_budget_monitoring = true

# 月度預算：$10（保守估計）
monthly_budget_limit = 10

# 每日成本警告：$1
daily_cost_threshold = 1

# ⚠️ 重要：替換為您的郵箱
budget_alert_emails = ["liyu.chu.work@gmail.com"]

# ============================================================================
# CloudWatch 日誌優化（最小成本）
# ============================================================================

# 日誌保留：只保留 1 天（大幅降低成本）
log_retention_in_days = 1

# 事件保留：7 天
click_events_retention_days = 7

# ============================================================================
# Lambda 環境變數
# ============================================================================

lambda_additional_environment = {
  # 生產環境只記錄錯誤（減少日誌量）
  LOG_LEVEL = "ERROR"
}

# ============================================================================
# 可選：自訂域名配置
# ============================================================================
# 如果您有域名並想使用 CloudFlare，請取消註釋：
# 
# web_domain         = "yourdomain.com"
# web_subdomain      = "chainy"
# web_hosted_zone_id = "YOUR_ROUTE53_ZONE_ID"

# ============================================================================
# 標籤
# ============================================================================

extra_tags = {
  Project      = "chainy"
  Environment  = "prod"
  CostProfile  = "optimized"
  ManagedBy    = "terraform"
  Owner        = "your-name"  # ⚠️ 替換為您的名字
}

# ============================================================================
# 💰 成本估算
# ============================================================================
#
# Lambda:         < $0.50  (免費額度內)
# DynamoDB:       < $0.20  (免費額度內)
# CloudWatch:     < $0.30  (1天保留)
# S3:             < $0.10  (7天保留)
# API Gateway:    < $0.20  (低流量)
# ────────────────────────
# 總計:           < $1.30/月
#
# + CloudFlare 免費方案（$0）
#
# 對比完整方案（$10-15/月）
# 節省：> 90%
# ============================================================================

